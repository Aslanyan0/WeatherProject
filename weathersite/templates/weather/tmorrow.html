{% block content %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sunlit</title>

    <link rel="stylesheet" href="{% static 'css_file/tmorrow.css' %}">
</head>

<body>

    <header>
        <div style="font-size: 45px; font-weight: 300;">
            Sunlit<br>
            <span id="current-time" style="font-size: 16px; opacity: 0.7;"></span>
        </div>

        <div class="nav-menu">
            <div id="today-tab">Today</div>
            <div id="tomorrow-tab" class="active">Tomorrow</div>
            <div id="weekly-tab">Weekly Forecast</div>
        </div>

        <a href="{% url 'accounts:login' %}"
            style="font-size: 20px; color: #fff; text-decoration: none; align-self: center;">
            Sign In
        </a>
    </header>

    <div class="search-container">
        <div class="search-bar">
            <img src="logos/search-icon.png" alt="search">
            Search location...
        </div>
    </div>

    <div class="carousel-container">
        <div class="arrow-btn">‚ùÆ</div>

        <div class="weather-card">
            <div class="weather-header">
                {{ city }}üìç<br>
                <span id="weather-date" style="font-size: 14px; opacity: 0.7;"></span>
            </div>

            <div class="weather-center">

                {% if description == "broken clouds" %}
                <img src="{% static 'cloud-logo.png' %}" alt="weather">

                {% elif description == "clear sky" %}
                <img src="{% static 'sunny-logo.png' %}" alt="weather">

                {% elif description == "few clouds" or description == " few clouds" %}
                <img src="{% static 'few-cloud.png' %}" alt="weather">

                {% elif description == "scattered clouds" %}
                <img src="{% static 'cloud.png' %}" alt="weather">

                {% elif description == "shower rain" %}
                <img src="{% static 'storm-rain-logo.png' %}" alt="weather">

                {% elif description == "rain" %}
                <img src="{% static 'rain-logo.png' %}" alt="weather">

                {% elif description == "thunderstorm" %}
                <img src="{% static 'storm-logo.png' %}" alt="weather">

                {% elif description == "snow" %}
                <img src="{% static 'snow-logo.png' %}" alt="weather">

                {% elif description == "mist" %}
                <img src="{% static 'mist.png' %}" alt="weather">
                {% endif %}

                <div class="weather-temp">{{ temperature|floatformat:0 }}¬∞C</div>
            </div>

            <div class="weather-stats">
                <div class="stat-block"><span>HUMIDITY</span><br>{{ humidity }}%</div>
                <div class="stat-block"><span>VISIBILITY</span><br>{{ visibility }} m</div>
                <div class="stat-block"><span>AIR PRESSURE</span><br>{{ air_pressure }} hPa</div>
                <div class="stat-block"><span>WIND</span><br>{{ speed }} m/s</div>
            </div>
        </div>

        <div class="arrow-btn">‚ùØ</div>
    </div>

    <!-- HOURLY FORECAST FOR TOMORROW -->
    <div class="hourly-container">
        {% for h in hourly %}
        <div class="hour-box">
            <div class="hour-time">
                {{ h.dt_txt|slice:"11:16" }}
            </div>

            <img class="hour-icon" src="https://openweathermap.org/img/wn/{{ h.weather.0.icon }}@2x.png" alt="icon">

            <div class="hour-temp">
                {{ h.main.temp|floatformat:0 }}¬∞C
            </div>
        </div>
        {% endfor %}
    </div>

    <footer>
        <div style="margin-bottom: 20px; font-size: 22px;">Sunlit</div>
        <a href="#">Home</a>
        <a href="#">About</a>
        <a href="#">Contact Us</a>
        <div style="margin-top: 20px;">
            <img src="logos/instagram-logo.png" alt="Instagram" style="width:28px; margin-right:15px;">
            <img src="logos/facebook-logo.png" alt="Facebook" style="width:28px;">
        </div>
    </footer>

    <script>
        function updateTime() {
            const timeElement = document.getElementById('current-time');
            const now = new Date();
            let hours = now.getHours();
            let minutes = now.getMinutes();
            minutes = minutes < 10 ? '0' + minutes : minutes;
            const ampm = hours >= 12 ? 'pm' : 'am';
            hours = hours % 12;
            hours = hours ? hours : 12;
            timeElement.textContent = hours + ':' + minutes + ' ' + ampm;
        }

        function updateDate(offset = 1) {
            const dateElement = document.getElementById('weather-date');
            const now = new Date();
            now.setDate(now.getDate() + offset);
            const options = { month: 'short', day: 'numeric', weekday: 'short' };
            dateElement.textContent = now.toLocaleDateString('en-US', options);
        }

        updateTime();
        setInterval(updateTime, 60000);

        updateDate(1); // tomorrow
    </script>

</body>

</html>
{% endblock %}
